---
layout: phpmetrics
---
<h2>Plugin Relations</h2>
<div id="chart-relations" class="mt-4"></div>

<script type="text/javascript">
    (function() {
        var relations = [
            {
                "name": "\\Mvc5\\Plugin\\Response",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Plugin",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Plugin",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\parent",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Plug",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Plug"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Plug",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Nullable",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Call",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Call",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Child",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Child",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Form",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Child",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Plugins",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Plugin",
                    "\\Mvc5\\Plugin\\Link",
                    "\\parent",
                    "\\Mvc5\\Plugin\\Args"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Link",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Args",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\FileInclude",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\FileInclude"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\FileInclude",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Copy",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Copy"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Copy",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Filter",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Filter"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Filter",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Value",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Value",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Callback",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Scoped",
                    "\\Closure",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Scoped",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Closure",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Calls",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Calls"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Calls",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Link",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\GlobalVar",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Value"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Factory",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Factory"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Factory",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Service",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Plugin",
                    "\\Mvc5\\Plugin\\Link",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Invoke",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Invoke"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Invoke",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\App",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Plugin",
                    "\\Mvc5\\Plugin\\Link",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Nothing",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Config",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Config"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Config",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Expect",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Expect",
                    "\\Throwable"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Expect",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Throwable",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Config\\Child",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Config\\Name",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Config\\Config",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Config\\Hydrator",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Config\\Args",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Config\\Plugin",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\NullValue",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Value",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Provide",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Provide"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Provide",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Scope",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Call",
                    "\\Mvc5\\Plugin\\Link",
                    "\\Mvc5\\Plugin\\Args",
                    "\\parent",
                    "\\Mvc5\\Service\\Service"
                ]
            },
            {
                "name": "\\Mvc5\\Service\\Service",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Register",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Controller",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Child"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Param",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Param"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Param",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Call",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Invokable",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Invokable"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Invokable",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Session",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Register",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Maybe",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Call",
                    "\\parent",
                    "\\Mvc5\\Plugin\\Nothing"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Hydrator",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Plugin"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Plugin",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Shared",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\Shared"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Shared",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\SignalArgs",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Gem\\SignalArgs"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\SignalArgs",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Scoped",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\Gem\\Args",
                "size": 3000,
                "relations": []
            },
            {
                "name": "\\Mvc5\\Plugin\\ScopedCall",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Call",
                    "\\Mvc5\\Plugin\\Scoped",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\ViewModel",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Plugin",
                    "\\parent"
                ]
            },
            {
                "name": "\\Mvc5\\Plugin\\End",
                "size": 3000,
                "relations": [
                    "\\Mvc5\\Plugin\\Call",
                    "\\Mvc5\\Plugin\\Args",
                    "\\parent"
                ]
            }
        ];

        /**
         * Thanks to http://bl.ocks.org/mbostock/raw/7607999/
         */
        function updateRelationsChart() {


            var diameter = document.getElementById('chart-relations').offsetWidth,
                radius = diameter / 2,
                innerRadius = radius - 120;

            var cluster = d3.layout.cluster()
                .size([360, innerRadius])
                .sort(null)
                .value(function (d) {
                    return d.size;
                });

            var bundle = d3.layout.bundle();

            var line = d3.svg.line.radial()
                .interpolate("bundle")
                .tension(.85)
                .radius(function (d) {
                    return d.y;
                })
                .angle(function (d) {
                    return d.x / 180 * Math.PI;
                });

            var svg = d3.select("#chart-relations").append("svg")
                .attr("width", diameter)
                .attr("height", diameter)
                .append("g")
                .attr("transform", "translate(" + radius + "," + radius + ")");

            var link = svg.append("g").selectAll(".link"),
                node = svg.append("g").selectAll(".node");


            var nodes = cluster.nodes(packageHierarchy(relations)),
                links = packageImports(nodes);
            link = link
                .data(bundle(links))
                .enter().append("path")
                .each(function (d) {
                    d.source = d[0], d.target = d[d.length - 1];
                })
                .attr("class", "link")
                .attr("d", line);

            node = node
                .data(nodes.filter(function (n) {
                    return !n.children;
                }))
                .enter().append("text")
                .attr("class", "node")
                .attr("dy", ".31em")
                .attr("transform", function (d) {
                    return "rotate(" + (d.x - 90) + ")translate(" + (d.y + 8) + ",0)" + (d.x < 180 ? "" : "rotate(180)");
                })
                .style("text-anchor", function (d) {
                    return d.x < 180 ? "start" : "end";
                })
                .text(function (d) {
                    return d.key;
                })
                .on("mouseover", mouseovered)
                .on("mouseout", mouseouted);


//        d3.data(relations);

            function mouseovered(d) {
                node
                    .each(function (n) {
                        n.target = n.source = false;
                    });

                link
                    .classed("link--target", function (l) {
                        if (l.target === d) return l.source.source = true;
                    })
                    .classed("link--source", function (l) {
                        if (l.source === d) return l.target.target = true;
                    })
                    .filter(function (l) {
                        return l.target === d || l.source === d;
                    })
                    .each(function () {
                        this.parentNode.appendChild(this);
                    });

                node
                    .classed("node--target", function (n) {
                        return n.target;
                    })
                    .classed("node--source", function (n) {
                        return n.source;
                    });
            }

            function mouseouted(d) {
                link
                    .classed("link--target", false)
                    .classed("link--source", false);

                node
                    .classed("node--target", false)
                    .classed("node--source", false);
            }

            d3.select(self.frameElement).style("height", diameter + "px");

            // Lazily construct the package hierarchy from class names.
            function packageHierarchy(classes) {
                var map = {};

                function find(name, data) {
                    name = (data ? name + ' ' : name);
                    var node = map[name], i;
                    if (!node) {
                        node = map[name] = data || {name: name, children: []};
                        if (name.length) {
                            node.parent = find(name.substring(0, i = name.lastIndexOf("\\")));
                            if (!node.parent.children) {
                                node.parent.children = []; // fix anomalies
                            }
                            node.parent.children.push(node);
                            node.key = name;//name.substring(i + 1);
                        }
                    }
                    return node;
                }

                classes.forEach(function (d) {
                    find(d.name, d);
                });

                return map[""];
            }

            // Return a list of imports for the given array of nodes.
            function packageImports(nodes) {
                var map = {},
                    imports = [];

                // Compute a map from name to node.
                nodes.forEach(function (d) {
                    map[d.name] = d;
                });

                // For each import, construct a link from the source to target node.
                nodes.forEach(function (d) {
                    if (d.relations) d.relations.forEach(function (i) {
                        imports.push({source: map[d.name], target: map[i]});
                    });
                });

                return imports;
            }


        }

        document.onreadystatechange = function () {
            if (document.readyState === 'complete') {
                updateRelationsChart();
            }
        };
    })();
</script>
